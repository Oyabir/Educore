<!-- user_participation_discipline_history.html -->

<h2>Historique de participation et discipline par utilisateur</h2>

<!-- Popup to select user -->
<div>
    <button id="openUserModal">Sélectionner un utilisateur</button>
</div>

<div id="userModal" style="display:none;">
    <h3>Sélectionnez un utilisateur</h3>
    <form method="GET" action="{% url 'user_participation_discipline_history' %}">
        <select name="user_id" id="user_id">
            <option value="">Choisissez un utilisateur</option>
            {% for user in all_users %}
                <option value="{{ user.id }}"{% if selected_user and selected_user == user.id %} selected{% endif %}>
                    {{ user.username }}
                </option>
            {% endfor %}
        </select>
        <button type="submit">Afficher</button>
    </form>
    <button id="closeUserModal">Fermer</button>
</div>

<!-- Display user performance -->
<h3>Affichage des résultats{% if selected_user %} pour l'utilisateur : <strong>{{ selected_user }}</strong>{% endif %}.</h3>

<ul>
    {% if user_performance %}
        <li>
            Participation : {{ user_performance.selected_user.participation }} - 
            Discipline : {{ user_performance.selected_user.discipline }}
        </li>
    {% else %}
        <li>Aucune donnée trouvée pour cet utilisateur.</li>
    {% endif %}
</ul>

<!-- Script to handle modal -->
<script>
    document.getElementById('openUserModal').onclick = function() {
        document.getElementById('userModal').style.display = 'block';
    }

    document.getElementById('closeUserModal').onclick = function() {
        document.getElementById('userModal').style.display = 'none';
    }
</script>


<style>
    /* styles.css */
#userModal {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: white;
    padding: 20px;
    border: 1px solid #ccc;
    z-index: 1000;
}

body {
    overflow: hidden; /* Prevent background scrolling when modal is open */
}

</style>